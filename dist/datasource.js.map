{"version":3,"sources":["datasource.js"],"names":["Object","defineProperty","exports","value","NGSIDatasource","undefined","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_lodash","require","_lodash2","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","TypeError","instanceSettings","$q","backendSrv","templateSrv","type","url","name","q","withCredentials","headers","basicAuth","query","options","_this","promises","buildQueryParameters","targets","filter","t","hide","console","log","data","targetArray","split","myType","myTarget","myProperty","maxDataPoints","rangeFrom","Date","range","from","toISOString","rangeTo","to","push","doRequest","method","Promise","all","then","results","returnArray","queryResponse","r","contextElement","contextResponses","attributes","includes","returnObject","datapoints","values","id","v","time","timeSplit","unixTime","datapointArray","recvTime","getTime","attrValue","rowArray","_r","valueElement","latitudeElement","longitudeElement","_returnObject","columns","text","rows","_v","row","lat","long","geohash","isNaN","encodeGeoHash","testDatasource","response","status","message","title","annotationQuery","replace","annotation","datasource","enable","iconColor","rangeRaw","result","metricFindQuery","mode","pattern","queryURL","n","mapToTextValue","map","d","isObject","datasourceRequest","_this2","scopedVars","refId","lon","precision","p","hash","posn","decodeGeohash","Number","Error","base32","idx","bit","evenBit","latMin","latMax","lonMin","lonMax","lonMid","latMid","charAt","toLowerCase","chr","indexOf","bitN","bounds","sw","ne","toFixed","Math","floor","LN10"],"mappings":"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","file":"datasource.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.NGSIDatasource = undefined;\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nvar NGSIDatasource = exports.NGSIDatasource = function () {\n    function NGSIDatasource(instanceSettings, $q, backendSrv, templateSrv) {\n        _classCallCheck(this, NGSIDatasource);\n\n        this.type = instanceSettings.type;\n        this.url = instanceSettings.url;\n        this.name = instanceSettings.name;\n        this.q = $q;\n        this.backendSrv = backendSrv;\n        this.templateSrv = templateSrv;\n        this.withCredentials = instanceSettings.withCredentials;\n        this.headers = { 'Content-Type': 'application/json', \"fiware-servicepath\": \"/\" };\n        if (typeof instanceSettings.basicAuth === 'string' && instanceSettings.basicAuth.length > 0) {\n            this.headers['Authorization'] = instanceSettings.basicAuth;\n        }\n    }\n\n    _createClass(NGSIDatasource, [{\n        key: 'query',\n        value: function query(options) {\n            var _this = this;\n\n            var promises = [];\n            var query = this.buildQueryParameters(options);\n            query.targets = query.targets.filter(function (t) {\n                return !t.hide;\n            });\n\n            if (query.targets.length < 1) {\n                console.log(\"no data for this panel\");\n                return { data: [] };\n            }\n\n            for (var t in query.targets) {\n                // Get data from timeserie and table response\n                var targetArray = query.targets[t].target.split(\".\");\n                var myType = targetArray[0];\n                var myTarget = targetArray[1];\n                var myProperty = targetArray[2];\n                var maxDataPoints = query.maxDataPoints;\n                if (maxDataPoints === 1) {\n                    maxDataPoints = 1250;\n                }\n                if (query.targets[t].target !== undefined && query.targets[t].target !== \"select entity\") {\n                    var rangeFrom = new Date(query.range.from).toISOString();\n                    var rangeTo = new Date(query.range.to).toISOString();\n\n                    promises.push(this.doRequest({\n                        url: this.url + \"/v1/contextEntities/type/\" + myType + \"/id/\" + myTarget + \"/attributes/\" + myProperty + \"?hLimit=\" + maxDataPoints + \"&dateFrom=\" + rangeFrom + \"&dateTo=\" + rangeTo,\n                        method: 'GET'\n                    }));\n\n                    promises.push(this.doRequest({\n                        url: this.url + \"/v1/contextEntities/type/\" + myType + \"/id/\" + myTarget + \"/attributes/\" + myProperty + \"___Latitude?hLimit=\" + maxDataPoints + \"&dateFrom=\" + rangeFrom + \"&dateTo=\" + rangeTo,\n                        method: 'GET'\n                    }));\n\n                    promises.push(this.doRequest({\n                        url: this.url + \"/v1/contextEntities/type/\" + myType + \"/id/\" + myTarget + \"/attributes/\" + myProperty + \"___Longitude?hLimit=\" + maxDataPoints + \"&dateFrom=\" + rangeFrom + \"&dateTo=\" + rangeTo,\n                        method: 'GET'\n                    }));\n                } else {\n                    return { data: [] };\n                }\n            }\n\n            return Promise.all(promises).then(function (results) {\n                var returnArray = [];\n                var queryResponse = {};\n                queryResponse.data = [];\n\n                if (query.targets[0].type === \"timeserie\") {\n                    // Timeseries format\n                    for (var r in results) {\n                        var contextElement = results[r].data.contextResponses[0].contextElement;\n\n                        if (contextElement.attributes[0].name.includes(\"___\") === false) {\n                            // Attribute is not metadata\n                            var returnObject = {};\n                            returnObject.datapoints = [];\n\n                            var values = contextElement.attributes[0].values;\n                            returnObject.target = contextElement.attributes[0].name + \" (\" + contextElement.type + \": \" + contextElement.id + \")\";\n\n                            for (var v in values) {\n                                var time = void 0,\n                                    timeSplit = void 0,\n                                    unixTime = void 0;\n                                var datapointArray = [];\n                                time = values[v].recvTime;\n                                time += \"Z\";\n                                timeSplit = time.split(' ');\n                                time = timeSplit[0] + \"T\" + timeSplit[1];\n                                unixTime = new Date(time).getTime();\n                                datapointArray.push(values[v].attrValue);\n                                datapointArray.push(unixTime);\n                                returnObject.datapoints.push(datapointArray);\n                            }\n                            returnArray.push(returnObject);\n                        }\n                    }\n                } else if (query.targets[0].type === \"table\") {\n                    // Table format (used for World Map Plugin)\n                    var rowArray = [];\n                    var _r = 0;\n\n                    while (_r < results.length) {\n                        var valueElement = results[_r].data.contextResponses[0].contextElement.attributes[0].values;\n                        var latitudeElement = results[_r + 1].data.contextResponses[0].contextElement.attributes[0].values;\n                        var longitudeElement = results[_r + 2].data.contextResponses[0].contextElement.attributes[0].values;\n\n                        var _returnObject = {};\n                        _returnObject.type = \"table\";\n                        _returnObject.columns = [{ text: \"Time\" }, { text: \"Value\" }, { text: \"geohash\" }, { text: \"latitude\" }, { text: \"longitude\" }];\n                        _returnObject.rows = [];\n\n                        // create rows\n                        for (var _v in valueElement) {\n                            var row = [];\n                            row.push(valueElement[_v].recvTime);\n                            row.push(valueElement[_v].attrValue);\n\n                            var lat = latitudeElement[_v].attrValue;\n                            var long = longitudeElement[_v].attrValue;\n                            var geohash = void 0;\n\n                            if (isNaN(lat) === false && isNaN(long) === false) {\n                                // Coordinates as numbers available\n                                geohash = _this.encodeGeoHash(lat, long); // format: u0m713d5ubmd\n\n\n                                // Generate random geohash\n                                /*const geohashLength = 12;\n                                let geohash = \"\";\n                                const char_list = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n                                for(let i=0; i < geohashLength; i++ )\n                                {\n                                    geohash += char_list.charAt(Math.floor(Math.random() * char_list.length));\n                                }*/\n                            } else {\n                                geohash = \"gzzzzzzzzzzz\";\n                            }\n\n                            row.push(geohash);\n                            row.push(lat);\n                            row.push(long);\n\n                            rowArray.push(row);\n                        }\n                        _returnObject.rows = rowArray;\n                        returnArray.push(_returnObject);\n\n                        // Step size = number of queries made above. ADJUST ACCORDINGLY!\n                        _r += 3;\n                    }\n                }\n                queryResponse.data = returnArray;\n                return queryResponse;\n            });\n        }\n    }, {\n        key: 'testDatasource',\n        value: function testDatasource() {\n            return this.doRequest({\n                url: this.url + \"/v2/entities\",\n                method: 'GET'\n            }).then(function (response) {\n                if (response.status === 200) {\n                    return { status: \"success\", message: \"Data source is working\", title: \"Success\" };\n                } else {\n                    return { status: \"success\", message: \"COMET URL cannot be automatically tested, sorry.\", title: \"No connection test possible\" };\n                }\n            });\n        }\n    }, {\n        key: 'annotationQuery',\n        value: function annotationQuery(options) {\n            var query = this.templateSrv.replace(options.annotation.query, {}, 'glob');\n            var annotationQuery = {\n                range: options.range,\n                annotation: {\n                    name: options.annotation.name,\n                    datasource: options.annotation.datasource,\n                    enable: options.annotation.enable,\n                    iconColor: options.annotation.iconColor,\n                    query: query\n                },\n                rangeRaw: options.rangeRaw\n            };\n\n            return this.doRequest({\n                url: this.url + '/annotations',\n                method: 'POST',\n                data: annotationQuery\n            }).then(function (result) {\n                return result.data;\n            });\n        }\n    }, {\n        key: 'metricFindQuery',\n        value: function metricFindQuery(mode, pattern) {\n            // Pre-fills data types\n            var queryURL = void 0;\n            if (mode === \"listTypes\") {\n                queryURL = \"/v2/types\";\n                return this.doRequest({\n                    url: this.url + queryURL,\n                    method: 'GET'\n                }).then(function (response) {\n                    if (response.status === 200) {\n                        var returnArray = [];\n                        for (var n = 0; n < response.data.length; n++) {\n                            if (response.data[n].type !== \"\" && response.data[n].type !== undefined) {\n                                var returnObject = {};\n                                returnObject.text = response.data[n].type;\n                                returnObject.value = response.data[n].type;\n                                returnArray.push(returnObject);\n                            }\n                        }\n                        return returnArray;\n                    }\n                });\n            } else if (mode === \"listIDs\" && pattern !== undefined && pattern !== \"select entity\") {\n                queryURL = \"/v2/entities?type=\" + pattern;\n                return this.doRequest({\n                    url: this.url + queryURL,\n                    method: 'GET'\n                }).then(function (response) {\n                    if (response.status === 200) {\n                        var returnArray = [];\n                        for (var n = 0; n < response.data.length; n++) {\n                            if (response.data[n].id !== \"\" && response.data[n].id !== undefined) {\n                                var returnObject = {};\n                                returnObject.text = response.data[n].id;\n                                returnObject.value = response.data[n].type + \".\" + response.data[n].id;\n                                returnArray.push(returnObject);\n                            }\n                        }\n                        return returnArray;\n                    }\n                });\n            }\n        }\n    }, {\n        key: 'mapToTextValue',\n        value: function mapToTextValue(result) {\n            return _lodash2.default.map(result.data, function (d, i) {\n                if (d && d.text && d.value) {\n                    return { text: d.text, value: d.value };\n                } else if (_lodash2.default.isObject(d)) {\n                    return { text: d, value: i };\n                }\n                return { text: d, value: d };\n            });\n        }\n    }, {\n        key: 'doRequest',\n        value: function doRequest(options) {\n            options.withCredentials = this.withCredentials;\n            options.headers = this.headers;\n\n            return this.backendSrv.datasourceRequest(options);\n        }\n    }, {\n        key: 'buildQueryParameters',\n        value: function buildQueryParameters(options) {\n            var _this2 = this;\n\n            //remove placeholder targets\n            options.targets = _lodash2.default.filter(options.targets, function (target) {\n                return target.target !== 'select entity';\n            });\n\n            var targets = _lodash2.default.map(options.targets, function (target) {\n                return {\n                    target: _this2.templateSrv.replace(target.target, options.scopedVars, 'regex'),\n                    refId: target.refId,\n                    hide: target.hide,\n                    type: target.type || 'timeserie'\n                };\n            });\n\n            options.targets = targets;\n\n            return options;\n        }\n    }, {\n        key: 'encodeGeoHash',\n        value: function encodeGeoHash(lat, lon, precision) {\n            if (typeof precision === 'undefined') {\n                // refine geohash until it matches precision of supplied lat/lon\n                for (var p = 1; p <= 12; p++) {\n                    var hash = this.encodeGeoHash(lat, lon, p);\n                    var posn = this.decodeGeohash(hash);\n                    if (posn.lat === lat && posn.lon === lon) {\n                        return hash;\n                    }\n                }\n                precision = 12; // set to maximum\n            }\n\n            lat = Number(lat);\n            lon = Number(lon);\n            precision = Number(precision);\n\n            if (isNaN(lat) || isNaN(lon) || isNaN(precision)) throw new Error('Invalid geoposition');\n\n            var base32 = '0123456789bcdefghjkmnpqrstuvwxyz';\n            var idx = 0; // index into base32 map\n            var bit = 0; // each char holds 5 bits\n            var evenBit = true;\n            var geohash = '';\n\n            var latMin = -90,\n                latMax = 90;\n            var lonMin = -180,\n                lonMax = 180;\n\n            while (geohash.length < precision) {\n                if (evenBit) {\n                    // bisect E-W longitude\n                    var lonMid = (lonMin + lonMax) / 2;\n                    if (lon >= lonMid) {\n                        idx = idx * 2 + 1;\n                        lonMin = lonMid;\n                    } else {\n                        idx = idx * 2;\n                        lonMax = lonMid;\n                    }\n                } else {\n                    // bisect N-S latitude\n                    var latMid = (latMin + latMax) / 2;\n                    if (lat >= latMid) {\n                        idx = idx * 2 + 1;\n                        latMin = latMid;\n                    } else {\n                        idx = idx * 2;\n                        latMax = latMid;\n                    }\n                }\n                evenBit = !evenBit;\n\n                if (++bit === 5) {\n                    // 5 bits gives us a character: append it and start over\n                    geohash += base32.charAt(idx);\n                    bit = 0;\n                    idx = 0;\n                }\n            }\n            return geohash;\n        }\n    }, {\n        key: 'decodeGeohash',\n        value: function decodeGeohash(geohash) {\n            var base32 = '0123456789bcdefghjkmnpqrstuvwxyz';\n\n            if (geohash.length === 0) throw new Error('Invalid geohash');\n            geohash = geohash.toLowerCase();\n\n            var evenBit = true;\n            var latMin = -90,\n                latMax = 90;\n            var lonMin = -180,\n                lonMax = 180;\n\n            for (var i = 0; i < geohash.length; i++) {\n                var chr = geohash.charAt(i);\n                var idx = base32.indexOf(chr);\n                if (idx === -1) throw new Error('Invalid geohash');\n\n                for (var n = 4; n >= 0; n--) {\n                    var bitN = idx >> n & 1;\n                    if (evenBit) {\n                        // longitude\n                        var lonMid = (lonMin + lonMax) / 2;\n                        if (bitN === 1) {\n                            lonMin = lonMid;\n                        } else {\n                            lonMax = lonMid;\n                        }\n                    } else {\n                        // latitude\n                        var latMid = (latMin + latMax) / 2;\n                        if (bitN === 1) {\n                            latMin = latMid;\n                        } else {\n                            latMax = latMid;\n                        }\n                    }\n                    evenBit = !evenBit;\n                }\n            }\n\n            var bounds = {\n                sw: { lat: latMin, lon: lonMin },\n                ne: { lat: latMax, lon: lonMax }\n            };\n\n            latMin = bounds.sw.lat;\n            lonMin = bounds.sw.lon;\n            latMax = bounds.ne.lat;\n            lonMax = bounds.ne.lon;\n\n            // cell centre\n            var lat = (latMin + latMax) / 2;\n            var lon = (lonMin + lonMax) / 2;\n\n            // round to close to centre without excessive precision: ⌊2-log10(Δ°)⌋ decimal places\n            lat = lat.toFixed(Math.floor(2 - Math.log(latMax - latMin) / Math.LN10));\n            lon = lon.toFixed(Math.floor(2 - Math.log(lonMax - lonMin) / Math.LN10));\n\n            return { lat: Number(lat), lon: Number(lon) };\n        }\n    }]);\n\n    return NGSIDatasource;\n}();\n//# sourceMappingURL=datasource.js.map\n//# sourceMappingURL=datasource.js.map\n//# sourceMappingURL=datasource.js.map\n//# sourceMappingURL=datasource.js.map\n//# sourceMappingURL=datasource.js.map"]}